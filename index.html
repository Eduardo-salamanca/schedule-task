<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8"/>
  <title>Jadwal & Tugas</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <style>
    :root{--merah:#c62828;--merah-muda:#ffebee;--putih:#fff;--hitam:#222;--highlight:#ffcdd2}
    *{box-sizing:border-box}
    body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;background:var(--merah-muda);color:var(--hitam)}
    header{background:var(--merah);color:var(--putih);padding:.4rem .8rem;display:flex;justify-content:space-between;align-items:center;font-weight:600}
    #dateInput{background:var(--putih);color:var(--merah);border:none;border-radius:4px;padding:.2rem .4rem;font-size:.9rem;width:110px;text-align:center}
    #badge{background:var(--putih);color:var(--merah);border-radius:50%;padding:.2rem .5rem;font-size:.8rem;font-weight:700}
    .wrapper{overflow-x:auto;padding:.4rem}
    .grid{display:flex;gap:.5rem;min-width:max-content}
    .col{min-width:150px}
    h3{margin:.3rem 0;text-align:center;color:var(--merah);font-size:1rem}
    .card{background:var(--putih);border:2px solid var(--merah);border-radius:6px;padding:.6rem;margin-bottom:.3rem;text-align:center;font-weight:600;cursor:pointer;transition:transform .15s,background .15s;font-size:.9rem}
    .card:hover{transform:translateY(-2px)}
    .card.highlight{background:var(--highlight);border-color:#b71c1c}
    #popup{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.45);display:flex;align-items:center;justify-content:center;z-index:10;opacity:0;pointer-events:none;transition:opacity .2s}
    #popup.show{opacity:1;pointer-events:auto}
    #popupBox{background:var(--putih);max-width:320px;width:90%;border-radius:8px;padding:1rem;box-shadow:0 4px 20px rgba(0,0,0,.25);text-align:center}
    #popupTitle{margin:.2rem 0 .6rem;font-size:1.1rem;font-weight:700;color:var(--merah)}
    #popupText{white-space:pre-wrap;margin-bottom:0}
    @media(max-width:600px){
      .wrapper{overflow-x:visible}
      .grid{flex-direction:column;min-width:0}
      .col{min-width:100%}
    }
  </style>
</head>
<body>
<header>
  <div>
    <label for="dateInput">Tanggal:</label>
    <input id="dateInput" type="text" placeholder="2025-07-19" maxlength="10">
  </div>
  <div id="badge">--</div>
</header>

<div class="wrapper">
  <div class="grid" id="jadwal"></div>
</div>

<!-- popup -->
<div id="popup" onclick="closePopup()">
  <div id="popupBox" onclick="event.stopPropagation()">
    <div id="popupTitle">Informasi Tugas</div>
    <div id="popupText"></div>
  </div>
</div>

<script>
const jadwal = {
  Senin:   ["Bahasa Indonesia","Bahasa Indonesia","Bahasa Inggris","Bahasa Inggris","Fisika","Fisika","Seni Rupa","TIK","TIK"],
  Selasa:  ["Mandarin","Mandarin","Bahasa Indonesia","Sejarah","Sejarah","Bahasa Inggris","Bahasa Inggris","Matematika","Matematika"],
  Rabu:    ["Fisika","Fisika","Biologi","Biologi","PPKn","PPKn","Musik","Matematika","Matematika"],
  Kamis:   ["Penjas","Penjas","Kimia","Kimia","Matematika","Biologi","Biologi"],
  Jumat:   ["Agama","Agama","Ekstrakurikuler","Matematika","Mandarin","Mandarin"],
  Sabtu:   ["Kimia","Kimia","Matematika","Matematika","Mandarin","Mandarin","Bahasa Indonesia"]
};

let tugas = {};
const dateInput = document.getElementById('dateInput');
let currentDate = new Date().toISOString().slice(0,10);
dateInput.value = currentDate;
dateInput.addEventListener('input', loadTugas);

function loadTugas(){
  if (!currentDate) return;
  fetch(`tugas-${currentDate}.json`)
    .then(r => r.ok ? r.json() : {})
    .then(data => { tugas = data || {}; render(); })
    .catch(() => { tugas = {}; render(); });
}
loadTugas();

function render(){
  const grid = document.getElementById('jadwal');
  grid.innerHTML = '';
  let count = 0;
  for (const hari of ["Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]){
    const col = document.createElement('div'); col.className = 'col';
    col.innerHTML = `<h3>${hari}</h3>`;
    jadwal[hari].forEach((pel, idx) => {
      const key = `${currentDate}_${hari}-${pel}-${idx}`;
      const card = document.createElement('div'); card.className = 'card';
      card.textContent = pel;
      if (tugas[key]){
        card.classList.add('highlight');
        count++;
        card.onclick = () => showPopup(tugas[key]);
      } else {
        card.onclick = () => showPopup('Tidak ada tugas yang diberikan');
      }
      col.appendChild(card);
    });
    grid.appendChild(col);
  }
  document.getElementById('badge').textContent = `${currentDate} â–¸ ${count}`;
}

function showPopup(text){
  document.getElementById('popupText').textContent = text;
  document.getElementById('popup').classList.add('show');
}
function closePopup(){
  document.getElementById('popup').classList.remove('show');
}
</script>
</body>
</html>
