
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8"/>
  <title>Jadwal & Tugas</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <style>
    :root{--biru:#1a237e;--biru-muda:#b3e5fc;--putih:#fff;--hitam:#222;--highlight:#ffcdd2;--auto-highlight:#fff176}
    *{box-sizing:border-box}
    body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;background:linear-gradient(to bottom, #1a237e, #b3e5fc);color:var(--hitam); overflow-x:hidden;}
    header{background:var(--biru);color:var(--putih);padding:.4rem .8rem;display:flex;justify-content:space-between;align-items:center;font-weight:600}
    #dateSel{background:var(--putih);color:var(--biru);border:none;border-radius:4px;padding:.2rem .4rem;font-size:.9rem}
    #badge {
      background: var(--putih);
      color: var(--biru);
      padding: .3rem .6rem;
      font-size: .85rem;
      font-weight: 700;
      border-radius: 6px;
      box-shadow: 2px 2px 5px rgba(0,0,0,0.2), inset -2px -2px 5px rgba(255,255,255,0.6);
      border: 1px solid rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }
    #badge:hover { transform: scale(1.05); }
    .wrapper{overflow-x:auto;padding:.4rem}
    .grid{display:flex;gap:.5rem;min-width:max-content}
    .col{min-width:150px}
    h3{margin:.3rem 0;text-align:center;color:var(--putih);font-size:1rem}
    .card{background:var(--putih);border:2px solid var(--biru);border-radius:10px;padding:.6rem;margin-bottom:.3rem;text-align:center;font-weight:600;cursor:pointer;transition:transform .15s,background .15s,box-shadow .3s;font-size:.9rem;box-shadow:0 4px 6px rgba(0,0,0,0.1)}
    .card:hover{transform:translateY(-2px);box-shadow:0 6px 12px rgba(0,0,0,0.2)}
    .card.highlight{background:var(--highlight);border-color:#b71c1c}
    .card.auto-highlight{background:var(--auto-highlight);border-color:#fbc02d}
    #popup{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.45);display:flex;align-items:center;justify-content:center;z-index:10;opacity:0;pointer-events:none;transition:opacity .2s}
    #popup.show{opacity:1;pointer-events:auto}
    #popupBox{background:var(--putih);max-width:320px;width:90%;border-radius:8px;padding:1rem;box-shadow:0 4px 20px rgba(0,0,0,.25);text-align:center}
    #popupTitle{margin:.2rem 0 .6rem;font-size:1.1rem;font-weight:700;color:var(--biru)}
    #popupText{white-space:pre-wrap;margin-bottom:0}
    @media(max-width:600px){
      .wrapper{overflow-x:visible}
      .grid{flex-direction:column;min-width:0}
      .col{min-width:100%}
    }
    #starry-sky{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,#1a237e,#b3e5fc);overflow:hidden;z-index:-1}
    .star{position:absolute;width:3px;height:3px;background:transparent;border-radius:50%;will-change:opacity,transform;animation:twinkle 200s infinite linear}
    @keyframes twinkle{0%{transform:translateX(-100vw);opacity:0}25%{opacity:0.8}75%{opacity:0.8}100%{transform:translateX(100vw);opacity:0}}
  </style>
</head>
<body>
<div id="starry-sky"></div>
<header>
  <div>
    <label for="dateSel">Tanggal:</label>
    <!-- Set default value here -->
    <input type="date" id="dateSel" value="2025-07-17">
  </div>
  <div id="badge">--</div>
</header>
<div class="wrapper">
  <div class="grid" id="jadwal"></div>
</div>
<div id="popup" onclick="closePopup()">
  <div id="popupBox" onclick="event.stopPropagation()">
    <div id="popupTitle">Informasi Tugas</div>
    <div id="popupText"></div>
  </div>
</div>
<script>
const jadwal = {
  Senin: ["Bahasa Indonesia","Bahasa Indonesia","Bahasa Inggris","Bahasa Inggris","Fisika","Fisika","Seni Rupa","TIK","TIK"],
  Selasa:["Mandarin","Mandarin","Bahasa Indonesia","Sejarah","Sejarah","Bahasa Inggris","Bahasa Inggris","Matematika","Matematika"],
  Rabu:["Fisika","Fisika","Biologi","Biologi","PPKn","PPKn","Musik","Matematika","Matematika"],
  Kamis:["Penjas","Penjas","Kimia","Kimia","Matematika","Biologi","Biologi"],
  Jumat:["Agama","Agama","Ekstrakurikuler","Matematika","Mandarin","Mandarin"],
  Sabtu:["Kimia","Kimia","Matematika","Matematika","Mandarin","Mandarin","Bahasa Indonesia"]
};
let tugas = {};
const dateSel = document.getElementById('dateSel');
// Use the input's value as the source of truth
let currentDate = dateSel.value;
dateSel.addEventListener('change', () => {
  currentDate = dateSel.value;
  loadTugas();
});
function loadTugas(){
  fetch(`tugas-${currentDate}.json`)
    .then(r => r.ok ? r.json() : {})
    .then(data => { tugas = data || {}; render(); })
    .catch(() => { tugas = {}; render(); });
}
loadTugas();
function render(){
  const grid = document.getElementById('jadwal');
  grid.innerHTML = '';
  let count = 0;
  const days = ["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"];
  const selectedDayName = days[new Date(currentDate).getDay()];
  for(const hari of ["Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]){
    const col=document.createElement('div');col.className='col';
    col.innerHTML=`<h3>${hari}</h3>`;
    jadwal[hari].forEach((pel,idx)=>{
      const key=`${currentDate}_${hari}-${pel}-${idx}`;
      const card=document.createElement('div');card.className='card';card.textContent=pel;
      if(tugas[key]){
        card.classList.add('highlight');
        count++;
        card.onclick=()=>showPopup(tugas[key]);
      } else {
        card.onclick=()=>showPopup('Tidak ada tugas yang diberikan');
        if(hari===selectedDayName) card.classList.add('auto-highlight');
      }
      col.appendChild(card);
    });
    grid.appendChild(col);
  }
  document.getElementById('badge').textContent=`${currentDate} â–¸ ${count}`;
}
function showPopup(text){
  document.getElementById('popupText').textContent=text;
  document.getElementById('popup').classList.add('show');
}
function closePopup(){
  document.getElementById('popup').classList.remove('show');
}
// Starry sky
const starrySky=document.getElementById('starry-sky');
for(let i=0;i<100;i++){
  const star=document.createElement('div');star.className='star';
  star.style.left=`${Math.random()*window.innerWidth}px`;
  star.style.top=`${Math.random()*window.innerHeight}px`;
  star.style.opacity=Math.random();
  star.style.animationDuration=`${Math.random()*5+2}s`;
  star.style.boxShadow=`#FFF ${Math.random()*100}px ${Math.random()*100}px ${Math.random()*100}px ${Math.random()*100}px`;
  starrySky.appendChild(star);
}
</script>
</body>
</html>
